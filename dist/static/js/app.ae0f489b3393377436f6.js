webpackJsonp([1],{"4QTM":function(t,i){},"9p2q":function(t,i){},DlsB:function(t,i){},NHnr:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var n=e("7+uW"),o=e("mtWM"),r=e.n(o),s=e("/ocq"),a={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",[i("span",[i("svg",{attrs:{viewBox:"25 25 50 50"}},[i("circle",{attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})])])])},staticRenderFns:[]};var u=e("VU/8")({name:"GLoading"},a,!1,function(t){e("9p2q")},"data-v-22b514d8",null).exports,c={name:"home",components:{loading:u},data:function(){return{scrollTop:0,history:null,slist:[]}},created:function(){var t=this;window.addEventListener("scroll",function(){t.scrollTop=window.scrollY}),this.history=localStorage.history,this.$_GetList()},computed:{controlOrder:function(){return"/detail/"+this.$_GetIds()},controlRandom:function(){return"/detail/"+this.util.arrShuffle(this.$_GetIds())},controlHistory:function(){return"/detail/"+this.history}},methods:{$_CompleteNum:function(t){return t+=1,this.util.fillZero(t)},$_GetIds:function(){for(var t=[],i=0;i<this.slist.length;i++)t.push(this.slist[i].id);return t},$_GetList:function(){var t=this;this.axios.get(this.util.baseUrl+"/slist").then(function(i){t.slist=i.data}).catch(function(t){console.error(t)})}}},d={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"home"},[0===t.slist.length?e("loading"):t._e(),t._v(" "),e("h1",{staticClass:"songs_title"},[t._v("推荐歌单")]),t._v(" "),t.slist.length>1?e("ul",{staticClass:"songs_control",class:{songs_control_history:t.history,songs_control_fixed:t.scrollTop>72}},[e("li",[e("router-link",{attrs:{to:t.controlOrder}},[t._v("顺序播放")])],1),t._v(" "),e("li",[e("router-link",{attrs:{to:t.controlRandom}},[t._v("随机播放")])],1),t._v(" "),t.history?e("li",[e("router-link",{attrs:{to:t.controlHistory}},[t._v("播放历史")])],1):t._e()]):t._e(),t._v(" "),e("ul",{staticClass:"songs_list"},t._l(t.slist,function(i,n){return e("li",{key:n},[e("router-link",{attrs:{to:"/detail/"+i.id}},[e("span",[t._v(t._s(t.$_CompleteNum(n)))]),t._v(" "),e("h4",[t._v(t._s(i.name))]),t._v(" "),e("small",[t._v(t._s(i.artist)+" - "+t._s(i.album))])])],1)})),t._v(" "),e("a",{staticClass:"copyright",attrs:{href:"https://github.com/iflycn/music"}},[t._v("Gito Player @ Github.com")])],1)},staticRenderFns:[]};var l=e("VU/8")(c,d,!1,function(t){e("4QTM")},"data-v-6e4e33d4",null).exports,f=e("Dd8w"),h=e.n(f),g=e("NYxO"),m={name:"detail",components:{GLoading:u},data:function(){return{lyricHeight:0}},computed:h()({},Object(g.d)(["audio"]),Object(g.b)(["formatLrc"]),{rangeStyle:function(){var t=1+~~(this.audio.currentTime/this.audio.duration*100),i="rgba(255, 255, 255, 0.2)";return"linear-gradient(to right, "+i+", #fff "+t+"%, "+i+" "+t+"%, "+i+")"},rangeTxt:function(){var t=~~this.audio.currentTime,i=~~this.audio.duration;return this.util.fillZero(~~(t/60%60))+":"+this.util.fillZero(t%60)+"/"+this.util.fillZero(~~(i/60%60))+":"+this.util.fillZero(i%60)}}),mounted:function(){var t=screen.availHeight-document.body.offsetHeight-150;this.lyricHeight=t<130?t+190:t}},p={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("div",{staticClass:"detail"},[0===t.audio.duration?e("g-loading"):t._e(),t._v(" "),e("div",{staticClass:"song_wrap"},[e("div",{staticClass:"song_disc",class:{song_needle:t.audio.isPaused},on:{click:function(i){t.$root.bus.$emit("GAudioSongToggle")}}},[e("div",{staticClass:"song_turn song_rotate",class:{song_paused:t.audio.isPaused}},[e("img",{staticClass:"song_cover",attrs:{src:t.audio.song.picUrl}})]),t._v(" "),e("span",{staticClass:"song_play",class:{song_pause:!t.audio.isPaused||0===t.audio.duration}})])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.audio.song.name&&t.audio.song.artist,expression:"audio.song.name && audio.song.artist"}],staticClass:"song_range"},[e("small",[t._v(t._s(t.rangeTxt))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.audio.currentTime,expression:"audio.currentTime"}],style:{background:t.rangeStyle},attrs:{type:"range",max:t.audio.duration},domProps:{value:t.audio.currentTime},on:{input:function(i){t.$root.bus.$emit("GAudioSongJump")},__r:function(i){t.$set(t.audio,"currentTime",i.target.value)}}})]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.audio.song.name&&t.audio.song.artist,expression:"audio.song.name && audio.song.artist"}],staticClass:"lyric",style:{height:t.lyricHeight+"px"}},[e("h3",[t._v(t._s(t.audio.song.name)+" - "+t._s(t.audio.song.artist))]),t._v(" "),e("div",{staticClass:"lyric_txt"},[e("ul",{style:{marginTop:"-"+2*~~t.audio.line+"em"}},t._l(t.formatLrc,function(i,n){return e("li",{key:n,class:{hover:t.audio.line===n}},[t._v(t._s(i.txt))])}))])]),t._v(" "),e("div",{staticClass:"song_bg",style:{backgroundImage:"url("+t.audio.song.picUrl+")"}})],1)},staticRenderFns:[]};var v=e("VU/8")(m,p,!1,function(t){e("cIcs")},"data-v-31912ec2",null).exports;n.a.use(s.a);var _=new s.a({routes:[{path:"/",name:"home",component:l},{path:"/detail/:id",name:"detail",component:v}]}),$={state:{ids:[],timer:-1,isPaused:!0,line:.001,duration:0,currentTime:0,song:{id:-1,name:null,artist:null,url:null,picUrl:e("aBLL"),lyric:""}},getters:{formatLrc:function(t){for(var i=t.song.lyric.replace(/(\[\d{2,}:\d{2}(?:\.\d{2,3})?]){2,}(.*)(\n)/g,function(t,i,e){return t.replace(e+"\n","").replace(/(\[\d{2,}:\d{2}(?:\.\d{2,3})?])/g,"$1"+e+"\n")}).split("\n"),e=/\[(\d{2,}):(\d{2})(?:\.(\d{2,3}))?]/g,n=[],o=0;o<i.length;o++){var r=e.exec(i[o]),s=i[o].replace(e,"").trim();r&&s&&n.push({time:60*r[1]*1e3+1e3*r[2]+10*(r[3]||0),txt:s})}return n.sort(function(t,i){return t.time-i.time}),n}},mutations:{setAudioIds:function(t,i){t.ids=i},setAudioTimer:function(t,i){t.timer=i},setAudioIsPaused:function(t,i){t.isPaused=i},setAudioLine:function(t,i){t.line=i},setAudioDuration:function(t,i){t.duration=i},setAudioCurrentTime:function(t,i){t.currentTime=i},setAudioSong:function(t,i){t.song=i}},actions:{}};n.a.use(g.a);var y=new g.a.Store({modules:{audio:$}}),b=e("pFYg"),w=e.n(b),A={baseUrl:"https://www.easy-mock.com/mock/5b06a51ba3065411030dc3c2/music",isMobile:function(){var t=!1,i=["iphone","ipod","ipad","android","mobile","blackberry","webos","incognito","webmate","bada","nokia","lg","ucweb","skyfire"],e=navigator.userAgent.toLowerCase();for(var n in i)-1!=e.indexOf(i[n])&&(t=!0);return t},isIE678:function(){return!1},isIE:function(){return!!window.VBArray},isOpera:function(){return!!window.opera},isFirefox:function(){return!!window.GeckoActiveXObject},isSafari:function(){return!(!navigator.vendor||!navigator.vendor.match(/Apple/))},isChrome:function(){return!(!window.chrome||!window.google)},isOdd:function(t){return!!(1&~~t)},isArray:function(t){return null!=t&&"object"===(void 0===t?"undefined":w()(t))&&"splice"in t&&"join"in t},isNaN:function(t){return t!=t},isNull:function(t){return null===t},isUndefined:function(t){return void 0===t},byteLen:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e=new Array(i+1).join("-");return t.replace(/[^\x00-\xff]/g,e).length},strFormat:function(t,i){var e=Array.prototype.slice.call(arguments,1);return t.replace(/\\?\#{([^{}]+)\}/gm,function(t,n){return"\\"==t.charAt(0)?t.slice(1):Number(n)>=0?e[Number(n)]:i&&void 0!==i[n]?i[n]:""})},fillZero:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return((1<<i).toString(2)+t).slice(-i)},randomColor:function(){return"#"+fillZero((~~(Math.random()*(1<<24))).toString(16),6)},arrShuffle:function(t){for(var i=1;i<t.length;i++){var e=~~(Math.random()*(i+1)),n=[t[e],t[i]];t[i]=n[0],t[e]=n[1]}return t},escapeHTML:function(t){return(t=""+t).replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;").replace(/"/g,"&#34;").replace(/'/g,"&#39;")},unescapeHTML:function(t){return(t=""+t).replace(/&#39;/g,"'").replace(/&#34;/g,'"').replace(/&#62;/g,">").replace(/&#60;/g,"<").replace(/&#38;/g,"&")},urlJump:function(t){location.href=t},getVar:function(t){var i=new RegExp("(^|)"+t+"=([^&]*)(&|$)","gi").exec(String(location.href));return i?i[2]:""}},T=e("Gu7T"),x=e.n(T),S={name:"GAudio",computed:h()({},Object(g.d)(["audio"]),Object(g.b)(["formatLrc"])),created:function(){var t=this;this.$root.bus.$on("GAudioSongToggle",function(){t.$_SongToggle()}),this.$root.bus.$on("GAudioSongJump",function(){t.$_SongJump()}),this.$_Init()},destroyed:function(){location.reload()},watch:{$route:function(){this.$_Init()},"audio.duration":function(){this.audio.duration>0&&this.$_SongPlay()},"audio.currentTime":function(){this.audio.currentTime>=this.audio.duration&&(this.$_SongPause(),this.audio.ids.length>1&&this.$_SongNext())},"audio.song.id":function(){var t=this;clearInterval(this.audio.timer),this.setAudioTimer(setInterval(function(){t.setAudioLine(t.$_StartTimer())},1e3))}},methods:h()({},Object(g.c)(["setAudioIds","setAudioTimer","setAudioIsPaused","setAudioLine","setAudioDuration","setAudioCurrentTime","setAudioSong"]),{$_StartTimer:function(){var t=this.$refs.audio.duration,i=this.$refs.audio.currentTime;this.setAudioDuration(t),this.setAudioCurrentTime(i);var e=[].concat(x()(this.formatLrc));if(e.push({time:1e3*t}),i<e[0].time/1e3)return.001;for(var n=0;n<e.length-1;n++)if(i>=e[n].time/1e3&&i<e[n+1].time/1e3)return n},$_SongPlay:function(){var t=this;this.audio.duration>0&&this.$refs.audio.play().then(function(){t.setAudioIsPaused(!1)}).catch(function(t){console.warn(t)})},$_SongPause:function(){this.$refs.audio.pause(),this.setAudioIsPaused(!0)},$_SongToggle:function(){this.audio.isPaused?this.$_SongPlay():this.$_SongPause()},$_SongLoad:function(){this.$refs.audio.load()},$_SongJump:function(){this.audio.currentTime<this.audio.duration&&(this.$refs.audio.currentTime=this.audio.currentTime)},$_SongNext:function(){this.setAudioDuration(0),this.audio.ids.splice(0,1),this.audio.ids.push(this.audio.song.id),this.$_GetDetail(this.audio.ids[0])},$_GetDetail:function(t){var i=this;this.axios.get(this.util.baseUrl+"/detail?id="+t).then(function(t){i.setAudioSong(t.data),localStorage.history=i.audio.ids.join(",")}).catch(function(t){console.error(t)})},$_Init:function(){var t=this.$route.params.id;t&&(-1===this.audio.ids.join(",").indexOf(t)&&this.setAudioLine(.001),this.setAudioIds(t.split(",")),this.$_GetDetail(this.audio.ids[0]))}})},C={render:function(){var t=this.$createElement;return(this._self._c||t)("audio",{ref:"audio",attrs:{src:this.audio.song.url,preload:""}})},staticRenderFns:[]},L={name:"app",components:{GAudio:e("VU/8")(S,C,!1,null,null,null).exports},beforeCreate:function(){console.log("%c Gito Player @ Github.com/iflycn/music","margin:1em 0;padding:1em;color:#fff;border-radius:.2em;background:#3caaf7")}},G={render:function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"main"},[i("transition",{attrs:{name:"fade-in",mode:"out-in"}},[i("router-view")],1),this._v(" "),i("g-audio")],1)},staticRenderFns:[]};var I=e("VU/8")(L,G,!1,function(t){e("DlsB")},null,null).exports;n.a.config.productionTip=!1,n.a.prototype.axios=r.a,n.a.prototype.util=A,new n.a({el:"#app",render:function(t){return t(I)},router:_,store:y,components:{app:I},data:{bus:new n.a},template:"<app/>"})},aBLL:function(t,i,e){t.exports=e.p+"static/img/disc_default.ec9c241.png"},cIcs:function(t,i){}},["NHnr"]);